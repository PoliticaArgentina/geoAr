<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>geoAr &amp; geofacet • geoAr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="geoAr &amp; geofacet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geoAr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/geoAr_geofacet.html">geoAr &amp; geofacet</a></li>
    <li><a class="dropdown-item" href="../articles/geoAr_leaflet.html">geoAr &amp; leaflet</a></li>
    <li><a class="dropdown-item" href="../articles/georefar.html">geoAr &amp; georeaf-ar</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PoliticaArgentina/geoAr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>geoAr &amp; geofacet</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PoliticaArgentina/geoAr/blob/main/vignettes/geoAr_geofacet.Rmd" class="external-link"><code>vignettes/geoAr_geofacet.Rmd</code></a></small>
      <div class="d-none name"><code>geoAr_geofacet.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://politicaargentina.github.io/geoAr">geoAr</a></span><span class="op">)</span> <span class="co"># Argentina's Spatial Data Toolbox, [github::PoliticaArgentina/geoAr] v0.0.1.2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hafen/geofacet" class="external-link">geofacet</a></span><span class="op">)</span> <span class="co"># 'ggplot2' Faceting Utilities for Geographical Data, CRAN v0.2.0</span></span>
<span><span class="co">#&gt; The legacy packages maptools, rgdal, and rgeos, underpinning the sp package,</span></span>
<span><span class="co">#&gt; which was just loaded, will retire in October 2023.</span></span>
<span><span class="co">#&gt; Please refer to R-spatial evolution reports for details, especially</span></span>
<span><span class="co">#&gt; https://r-spatial.org/r/2023/05/15/evolution4.html.</span></span>
<span><span class="co">#&gt; It may be desirable to make the sf package available;</span></span>
<span><span class="co">#&gt; package maintainers should consider adding sf to Suggests:.</span></span>
<span><span class="co">#&gt; The sp package is now running under evolution status 2</span></span>
<span><span class="co">#&gt;      (status 2 uses the sf package in place of rgdal)</span></span></code></pre></div>
<p><a href="https://politicaargentina.github.io/geoAr">geoAr</a> está pensado para facilitar el acceso a datos y
el trabajo con información geográfica de argentina. Una de las
posibilidades es la descarga de capas ge geometrías con el objetivo de
visualizar información. Una alternativa típica es utilizar
<a href="https://r-spatial.github.io/sf/" class="external-link">sf</a> para trabajar con datos de este tipo y combinarlo con
<a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> (y su función <code>geom_sf()</code> para
visualizar capas geográficas.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">tucuman</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_geo.html">get_geo</a></span><span class="op">(</span>geo <span class="op">=</span> <span class="st">"TUCUMAN"</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">tucuman_names</span> <span class="op">&lt;-</span> <span class="va">tucuman</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_geo_codes.html">add_geo_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># Augment data with metadata as districts names or alternative id codes</span></span>
<span><span class="co">#&gt; Simple feature collection with 17 features and 8 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -66.18101 ymin: -28.01575 xmax: -64.48315 ymax: -26.06037</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A tibble: 17 × 9</span></span>
<span><span class="co">#&gt;    codprov_censo coddepto_censo codprov coddepto nomdepto_censo  name_prov codprov_iso</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;      </span></span>
<span><span class="co">#&gt;  1 90            007            23      013      BURRUYACU       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  2 90            014            23      012      CRUZ ALTA       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  3 90            021            23      005      CHICLIGASTA     TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  4 90            028            23      003      FAMAILLA        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  5 90            035            23      009      GRANEROS        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  6 90            042            23      007      JUAN B. ALBERDI TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  7 90            049            23      008      LA COCHA        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  8 90            056            23      011      LEALES          TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  9 90            063            23      002      LULES           TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 10 90            070            23      004      MONTEROS        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 11 90            077            23      006      RIO CHICO       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 12 90            084            23      001      CAPITAL         TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 13 90            091            23      010      SIMOCA          TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 14 90            098            23      017      TAFI DEL VALLE  TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 15 90            105            23      016      TAFI VIEJO      TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 16 90            112            23      014      TRANCAS         TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 17 90            119            23      015      YERBA BUENA     TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: name_iso &lt;chr&gt;, geometry &lt;MULTIPOLYGON [°]&gt;</span></span>
<span></span>
<span></span>
<span><span class="co"># MAPING</span></span>
<span></span>
<span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">tucuman_names</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_label</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">nomdepto_censo</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not give</span></span>
<span><span class="co">#&gt; correct results for longitude/latitude data</span></span></code></pre></div>
<p><img src="figure/tucmap-1.png"></p>
<p>No obstante, existen ocaciones en las que la visualización de
información geográfica a través de mapas convencionales puede no ser la
mejor opción. <a href="https://github.com/hafen/geofacet" class="external-link">geofacet</a> es un paquete que busca sacar
provecho de la potencia de <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> y utilizar el
<em>facetado</em> de un modo que cada caja de una grilla represente una
entidad y que la suma de estas guarden relación con su distribución
espacial.</p>
<div class="section level3">
<h3 id="ejemplo">Ejemplo<a class="anchor" aria-label="anchor" href="#ejemplo"></a>
</h3>
<p>En los gráficos que siguen se representa un indicador tipico de la
Ciencia Política (el <em>Número Efectivo de Partidos</em>) para una
serie de tiempo para todas las provincias de Argentina. En el primer
caso esto está facilitado al generar un <em>facet</em> a partir de la
variable PROVINCIA, generando un pequeño gráfico para cada distrito
(<em>small multiple</em>).</p>
<p><img src="https://tuqmanor.netlify.app/post/Geofacetear_files/figure-html/unnamed-chunk-1-1.png"></p>
<p>En el segundo se utiliza geofacet para acomodar esta grilla <em>cómo
si fuera un mapa</em> de Argentina. Facilitando de este modo una mirada
que tenga en cuenta (y conocimiento) de la distribución geográfica de
las provincias.</p>
<p><img src="https://tuqmanor.netlify.app/post/Geofacetear_files/figure-html/unnamed-chunk-2-1.png"></p>
<blockquote>
<p>“El paquete geofacet amplía ggplot2 de una manera que facilita la
creación de visualizaciones geográficamente facetadas en R. Para usar
geofacet se toman datos que representan diferentes entidades geográficas
y se aplica un método de visualización para cada entidad. El conjunto
resultante de visualizaciones conforma una cuadrícula que imita la
topología geográfica original”.</p>
</blockquote>
<p>(Traducción propia de la nota intorudctoria del autor, Ryan Haffen.
Fuente: <a href="https://tuqmano.ar/posts/Geofacetear.html" class="external-link uri">https://tuqmano.ar/posts/Geofacetear.html</a>)</p>
<p>Los siguientes puntos resumen las ventajas potenciales para el uso de
esta herramientas en comparación de otras técnicas para representar
información a través de mapas u otras alterantivas (como cartogramas,
tilemaps, etc.):</p>
<ul>
<li><p>se pueden graficar múltiples variables para cada unidad
geográfica</p></li>
<li><p>se pueden aplicar otros esquemas de codificación visual más allá
del color</p></li>
<li><p>cada unidad geográfica tiene asignada la misma proporción
espacial</p></li>
</ul>
<p>Una particularidad del paquete <a href="https://github.com/hafen/geofacet" class="external-link">geofacet</a> es que
propicia el desarrollo de grillas por parte de usuaries. Tanto para uso
<em>ad hoc</em> como para contribuir con un <a href="https://hafen.github.io/geofacet/articles/geofacet.html#list-available-grids" class="external-link">repositorio
de grillas que alimenta el paquete</a>. Esta iniciativa nos impulsó a
desarrollar grillas para Argentina y todas sus provincias, que
terminaron conformando <code>{geofacetAR}</code>, antecedente de este
proyecto que tuvo sus primeros pasos en el marco del <em>1° LatinR</em>
en el que presentamos <em>Geofaceting Argentina</em></p>
<p><a href="https://github.com/TuQmano/geofacet_ARG/blob/master/.LatinR/Geofaceting_Argentina_RuizNicolini.pdf" class="external-link">Abstract</a>
| 📊 <a href="https://www.researchgate.net/publication/327382101_Geofaceting_Argentina_LatinR_2018" class="external-link">Slides</a>
| 📦 <a href="https://electorarg.github.io/geofaceteAR/" class="external-link">{geofaceteAR}</a> | ⌨️
<a href="https://tuqmano.ar/posts/2020-05-22-empaquetar.html" class="external-link">blogpost</a>.</p>
</div>
<div class="section level3">
<h3 id="get_grid">get_grid()<a class="anchor" aria-label="anchor" href="#get_grid"></a>
</h3>
<p>Así como <code><a href="../reference/get_geo.html">get_geo()</a></code> permite descargar un set de datos que
incluyen una variable <code>geometry</code> con información geográfica
para la generación de mapas, <code><a href="../reference/get_grid.html">get_grid()</a></code> permite descargar
grillas pre diseñadas para Argentina y cada una de las provincias.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="op">(</span><span class="va">tucuman_names</span> <span class="op">&lt;-</span> <span class="va">tucuman</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_geo_codes.html">add_geo_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># Augment data with metadata as districts names or alternative id codes</span></span>
<span><span class="co">#&gt; Simple feature collection with 17 features and 8 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -66.18101 ymin: -28.01575 xmax: -64.48315 ymax: -26.06037</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; # A tibble: 17 × 9</span></span>
<span><span class="co">#&gt;    codprov_censo coddepto_censo codprov coddepto nomdepto_censo  name_prov codprov_iso</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;      </span></span>
<span><span class="co">#&gt;  1 90            007            23      013      BURRUYACU       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  2 90            014            23      012      CRUZ ALTA       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  3 90            021            23      005      CHICLIGASTA     TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  4 90            028            23      003      FAMAILLA        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  5 90            035            23      009      GRANEROS        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  6 90            042            23      007      JUAN B. ALBERDI TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  7 90            049            23      008      LA COCHA        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  8 90            056            23      011      LEALES          TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt;  9 90            063            23      002      LULES           TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 10 90            070            23      004      MONTEROS        TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 11 90            077            23      006      RIO CHICO       TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 12 90            084            23      001      CAPITAL         TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 13 90            091            23      010      SIMOCA          TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 14 90            098            23      017      TAFI DEL VALLE  TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 15 90            105            23      016      TAFI VIEJO      TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 16 90            112            23      014      TRANCAS         TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; 17 90            119            23      015      YERBA BUENA     TUCUMAN   AR-T       </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: name_iso &lt;chr&gt;, geometry &lt;MULTIPOLYGON [°]&gt;</span></span>
<span></span>
<span></span>
<span><span class="co"># GRIDS AS IF THEY WHERE MAPS FOR {geofacet}</span></span>
<span></span>
<span><span class="op">(</span><span class="va">grid_tucuman</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_grid.html">get_grid</a></span><span class="op">(</span><span class="st">"TUCUMAN"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Adding missing grouping variables: `name_provincia`</span></span>
<span><span class="co">#&gt;    name_provincia            name row col code</span></span>
<span><span class="co">#&gt; 1         TUCUMAN       BURRUYACU   1   4  013</span></span>
<span><span class="co">#&gt; 2         TUCUMAN         CAPITAL   2   4  001</span></span>
<span><span class="co">#&gt; 3         TUCUMAN     CHICLIGASTA   4   2  005</span></span>
<span><span class="co">#&gt; 4         TUCUMAN       CRUZ ALTA   2   5  012</span></span>
<span><span class="co">#&gt; 5         TUCUMAN        FAMAILLA   3   3  003</span></span>
<span><span class="co">#&gt; 6         TUCUMAN        GRANEROS   5   4  009</span></span>
<span><span class="co">#&gt; 7         TUCUMAN JUAN B. ALBERDI   5   3  007</span></span>
<span><span class="co">#&gt; 8         TUCUMAN        LA COCHA   6   3  008</span></span>
<span><span class="co">#&gt; 9         TUCUMAN          LEALES   3   5  011</span></span>
<span><span class="co">#&gt; 10        TUCUMAN           LULES   3   4  002</span></span>
<span><span class="co">#&gt; 11        TUCUMAN        MONTEROS   3   2  004</span></span>
<span><span class="co">#&gt; 12        TUCUMAN       RIO CHICO   4   3  006</span></span>
<span><span class="co">#&gt; 13        TUCUMAN          SIMOCA   4   4  010</span></span>
<span><span class="co">#&gt; 14        TUCUMAN  TAFI DEL VALLE   2   1  017</span></span>
<span><span class="co">#&gt; 15        TUCUMAN      TAFI VIEJO   2   2  016</span></span>
<span><span class="co">#&gt; 16        TUCUMAN         TRANCAS   1   3  014</span></span>
<span><span class="co">#&gt; 17        TUCUMAN     YERBA BUENA   2   3  015</span></span>
<span></span>
<span><span class="fu">geofacet</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/geofacet/man/grid_preview.html" class="external-link">grid_preview</a></span><span class="op">(</span><span class="va">grid_tucuman</span>, label <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Note: You provided a user-specified grid. If this is a generally-useful grid,</span></span>
<span><span class="co">#&gt;   please consider submitting it to become a part of the geofacet package. You</span></span>
<span><span class="co">#&gt;   can do this easily by calling: grid_submit(__grid_df_name__)</span></span></code></pre></div>
<p><img src="figure/tucgrid-1.png"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://tuqmano.ar" class="external-link">Juan Pablo Ruiz Nicolini</a>, Patricio Del Boca, Juan Gabriel Juara.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
